language: node_js
sudo: false
node_js:
- stable
- 8
- 6
env:
  global:
  - K2_BUCKET: ops.tonym.us
  - secure: UAfiDlD6RF6d3dDH3Nf8ZYDKQFzzToUhP8ymqxILgyvYjXwjB3Kigi8Wh5T8ln3p9zxQFt4oCIDnekN5NUSGCNAnMaobC9SFSA6bsCwCtAviuH3DA8/mFSOmmC0P4+9H73BaYxDTPA9/FYE2z4T4NAjEUo9VwhCZqnns82IfV8ZPc2nN9iyNHVqZ2+YOGPu9NnxswBZOejITLqYJh00jXXl87mH7POcbnj6RWZs16ki/Fy7ZFC9g+ga8Wyc6J0oQfBqlEv0aXXmCgAgEIONhstPWyv/6ndGI46+GRmbvBYU39Kwk15WxO6GoIm2ZwRKfl5Oomc0YY/o4sOHKedJC2RlZYRir9g3+ZPJh6wkIGvSUgsaRi1ikCZcoapm3XM+fUIBTrn6CiXJimigBHhzwugHzXp1fAi5K63DUf+iTjWh0wHCDmaUX2r15bp0aARZ2hw76DlKfh3jzZZbXcvxes9Jn59lLZSsDmCDaBGadGc+CbRmBZS3n7jmBCnuFZBl+zIKWmJynIEz1lBj4TCKqWkfJ96w6C7lY3A4rJtlNgy78DJwNB0Bi2fLwVbSLTolN2wmfYuL8g8NwusvEXc3kG7vrkj7kO49Ui15XqHkRuwqCc8X0OFVp/XXrN/uFU50I2lVVjG8xDIg972dRIh0jJKr2oRsMv+r/3Xw8emCzNP0=
  - secure: dD5aIwZpSsFn4efP5i3RVeGbj49pRYPUyiHg3t5XqqbBHyBRaw7hZfaU0qw0wQmxFTfaQMWMt6u+5QjSaqIwUeAE0kLK2OjVEVPZRGra8x0BxPcv8XsOZ6QJxZ/Ndi0BU4LTb/cXfgiweI4UNX4drz9LHmfIICnFDHF4GcqcRdBUKoiCio2CLcLRyLl8MRbL0Qmb6Sn7lfDVbDtOZGP0QVSdLtSX7KWnz2UL0jF9mDAdP35ANdQawIwadM/kkoIUr47/KU4fmbH68dOhIY2z/AZnRGzvNQWndax/LDyusJSuJgC3hqYVEluzHQ2l88UNjDu0bY7rGdx5VBsq5aygifC5MLw7C5pJ1ZK4oPQPr02vjDeGpy0xm/Kcu5O1xnL+eCgF1d37CY2PPqH6TMyK5em5QNnkB4dMwVvb0IediNfObBdESxGvZmlvnYt1DqbdXbr9i8oLQTLUX6zgG+qn28cdfmtgjNxsJdjJka1lByQVlWaB8d0PABNCNJLA3gTO7E2KuPSIOufowW8Xyn3nOYvlBbpQhdKPztkpMBVqnByAFEvARJxvNmrdOrM2eqTGyW1cRUudO62FAYcv6yTHeMKjVxsCaq+Q5xQIeSzGBCx1AEYOn2oMcET/XGGOuMqsDMp2ksEHaCkd7v0WXoXeRYfUu9c8J+qPCvqqBaTY13Q=
cache:
  yarn: true
  directories:
  - node_modules
install:
- yarn --ignore-engines
script:
- yarn lint
- yarn test
jobs:
  include:
  - stage: npm release
    node_js: stable
    deploy:
      email: tonym@tonym.us
      provider: npm
      on:
        tags: true
      api_key:
        secure: cZUFvuvs0PTLvSwLCYDRshlYRaQeYdf/el3tEV884IOlSe5IOqNEGgY2+46/j+g+4j6CFZEiUfaHhEzfw9Z5Bqlvembi24tN44Ri0fEE9qog6b/uZqr5q7keeCBzZMvEGUSkWvLLnGiqkjDbJZ4CxhQSaHJo64VEofPOKbtwzz0Pl46KAXWa3ucoAi6Bo9TQ3xovqFmB/JSejtXw5NsE5nyTw08hahG4Rs4ASpV2CcoYvZd+TGCQfrXN6D1dYomysorlZ6D8nhrBLDtqC+rvNzT9VC63Ct9KCsEHbsknUG5SaO010QI1pQkOZ21Tw7SWnx6vYbjJsQfj9lg7wxN8CcFQXbXbYxNXXfeSxXNsLRvFuIbUULTUv9qxAZdNHu4jYfhpTZyQk+FA8j3a7NEPWZLWbkLZbQGQ1XNtyMNnvZkIvfQEv3gdKGsJ8ZeiVgXoGOPW+rSGWRUtp+lZEqt6OCdvbMYliIcSTKdYSbAePPQJKsCtYPSwr0KMtHTVJOaORrN+BE5yxgvtGjxqHISv0Iugz1D2k8yiQ1NDHgRwmROBAi9uIVuidBcRvDDr3RIl/KcJYBpnBIA42Wor+suS6pdFXSImEDVlbY8XWVSqkSU+eabpzweWPemVZPIRAdpNsQPndorkJ5ACoM1aampoobw94WthZ16ZhCmTcrSuCXg=